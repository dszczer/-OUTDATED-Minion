# Minion - Silex framework wrapper
###### Powerful wrapper extending Silex, merging simplicity of Silex and usability of Symfony 2.


## Main features
* Silex basic features ([see more](http://silex.sensiolabs.org/documentation "Silex documentation"))
* Propel 2.x integration
* Twig 2.x integration
* More flexible services
* Controller classes with handy helpers
* Command line support


## Installation
######*NOTE: Minion require PHP version 5.6.x or greater*.

#### Using Composer
######*Recommended*
Type in console `composer require dszczer/minion`.


## Usage
#### Project directory tree
##### Legend:
- *\* required*
- *\[name\] directory*

```
. (root directory)
+-- [app]*
|   +-- config.yml*
|   +-- parameters.yml*
|   +-- routing.yml*
|
+-- [bin] (autogenerated by Composer)
|
+-- [src]* (project source code)
|   +-- [Controller]*
|   +-- [Resources] (required if using Twig)
|       +-- [views]*
|
+-- [var]*
|   +-- [cache] (must have write rights)
|   +-- [log] (must have write rights)
|
+-- [vendor]* (Composer dependencies)
|
+-- [web]* (public access directory - server document root)
    +-- assets (any directory structure)
    +-- index.php (entry point)
```

#### Bootstrap
All you need to bootstrap Minion is include Composer autoloader, provide application namespace *(not required, but recommended)*, instantiate `Minion\Application` and call `run()` method on it.
```php
// web/index.php

require_once __DIR__ . '/../vendor/autoload.php';

// it is recommended to provide ./src/ namespace, but Minion will try to guess this value
$namespace = 'Project\\';

$app = new Minion\Application($namespace, ['debug' => false, 'environment' => 'prod']);
$app->run();
```
You will need to configure your server to point `./web` directory as the **only one** with public access, and `index.php` as directory index. Look [here](http://silex.sensiolabs.org/doc/web_servers.html) for more information.

#### Routing
##### Routing map
Routing map file is based on [Symfony 2 routing files](http://symfony.com/doc/2.8/book/routing.html#basic-route-configuration).
```yaml
# app/routing.yml

homepage:
    path: /
    defaults: { _controller: "DefaultController::indexAction" }

# ...
```

##### Controllers
Minion provides helpful controller basic class. To extend this class and use actions, write your controller like this:
```php
// src/Controller/DefaultController.php

namespace Project\Controller;

use Minion\Controller;
use Minion\Application;
use Symfony\HttpFoundation\Request;
// ...

class DefaultController extends Controller
{
    public function indexAction(Request $request, Application $app)
    {
        // ...
        
        // if you're using Twig, path is relative to src/Resources/views/
        return $this->render('index.html.twig');
        
        // if you're not using Twig, path is relative to src/
        return $this->render('template_index.html.php');
    }
}
```
**IMPORTANT:** action shall **always** return an `Symfony\HttpFoundation\Response` object.